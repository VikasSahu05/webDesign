!function(i,d){"use strict";PushWidgets.WFDropdowns=new Class({Implements:[Events],delegationRoot:null,bound:{},initialize:function(t){this.delegationRoot=$(t)||d.body,this.delegationRoot.addEvent("click:relay([data-dropdown-trigger])",this.show.bind(this)),this.delegationRoot.getElements("[data-dropdown-trigger]").set("aria-haspopup","true").set("aria-expanded","false"),PushWidgets.hasTouch&&this.delegationRoot.addEvent("touchend:relay([data-dropdown-trigger])",this.show.bind(this)),this.bound.hide=this.hide.bind(this),this.hide()},show:function(t,e){var d=$(e.getAttribute("data-dropdown-trigger"))||e.getElement(e.getAttribute("data-dropdown-trigger"));d.hasClass("dropdown-open")?this.hide(t):(this.hide(t),d.addClass("dropdown-open").set("aria-hidden","false"),e.addClass("active").setAttribute("aria-expanded","true"),this.positionElement(e,d),this.fireEvent("show",[t,e]),"touchend"==t.type&&t.preventDefault(),this.bound.resize=function(){this.positionElement(e,d)}.bind(this),i.addEvent("resize",this.bound.resize),this.delegationRoot.addEvent("click",this.bound.hide),PushWidgets.hasTouch&&this.delegationRoot.addEvent("touchend",this.bound.hide))},hide:function(t){t&&(this.fireEvent("hide",t),(t=$(t.target)).hasAttribute("data-dropdown-content")||null!==t.getParent(".dropdown-open[data-dropdown-content]")||($$("[data-dropdown-trigger]").each(function(t){($(t.getAttribute("data-dropdown-trigger"))||t.getElement(t.getAttribute("data-dropdown-trigger"))).removeClass("dropdown-open").set("aria-hidden","true"),t.removeClass("active").setAttribute("aria-expanded","false")}),this.delegationRoot.removeEvent("click",this.bound.hide),PushWidgets.hasTouch&&this.delegationRoot.removeEvent("touchend",this.bound.hide),i.removeEvent("resize",this.bound.resize)))},positionElement:function(t,e){var d,o=(t.getBoundingClientRect().y||t.getBoundingClientRect().top)<i.getHeight()/1.75?(d=t.getAttribute("data-dropdown-anchor")||e.getAttribute("data-dropdown-anchor")||"topLeft",t.getAttribute("data-dropdown-edge")||e.getAttribute("data-dropdown-edge")||"bottomLeft"):(d=t.getAttribute("data-dropdown-anchor")||e.getAttribute("data-dropdown-anchor")||"bottomLeft",t.getAttribute("data-dropdown-edge")||e.getAttribute("data-dropdown-edge")||"topLeft");e.position({relativeTo:t,position:o,edge:d})}}),PushWidgets.WFDropdowns.attach=function(t,e){PushWidgets.WFDropdowns.attached||new PushWidgets.WFDropdowns(t||d.body,e),PushWidgets.WFDropdowns.attached=!0}}(window,document);