"use strict";window.dataLayer=window.dataLayer||[];var PushWidgets={enableDebug:!1};!function(s,n){PushWidgets.debug=(PushWidgets.enableDebug?console.info:{})||{},["transitionstart","transitionend","animationstart","animationiteration","animationend"].each(function(e){["webkit","moz","ms","o"].each(function(t){t=t.toLowerCase()+e.toLowerCase();Element.NativeEvents[t]=2,Element.Events[t]={base:e}})}),n.html.setAttribute("data-dpr",s.devicePixelRatio.round().limit(1,2)),s.noop=function(){},Function.implement({debounce:function(n,s){var r,a=this;return function(){var t=this,e=arguments,i=s&&!r;clearTimeout(r),r=setTimeout(function(){r=null,s||a.apply(t,e)},n),i&&a.apply(t,e)}}}),Element.implement({forceStyle:function(t,e){return this.getStyle&&this.getStyle(t)!==e&&this.setStyle(t,e),this}}),n.getScrollbarWidth=function(){var t=new Element("div",{style:{visibility:"hidden",width:100,"-ms-overflow-style":"scrollbar","-webkit-overflow-style":"scrollbar","overflow-style":"scrollbar"}}).inject(n.body),e=t.offsetWidth;t.setStyle("overflow","scroll");var i=new Element("div",{style:{width:"100%"}}).inject(t).offsetWidth;return t.parentNode.removeChild(t),e-i},n.getCompensatedViewportHeight=function(){return s.getHeight()},s.addEvent("resize",function(){PushWidgets.getViewportSize(!0)}),s.addEvent("domready",function(){n.addEvent("click:relay([data-class-toggle][data-class-toggle-target])",function(t,e){t.preventDefault();var i,t=$$(e.getAttribute("data-class-toggle-target"));null!==t?(i=this.getAttribute("data-class-toggle"),t.toggleClass(i)):""==$$(e.getAttribute("data-class-toggle-target"))&&e.toggleClass(i),s.fireEvent("classToggle",[e,i,e.hasClass(i)])}),n.addEvent("click:relay([data-class-cancel][data-class-cancel-target])",function(t,e){t.preventDefault();var i,n=$$(e.getAttribute("data-class-cancel-target"));null!==n&&(i=e.getAttribute("data-class-cancel")).split(" ").each(function(t){n.removeClass(t)}),s.fireEvent("classToggle",[e,i,!1])})}),PushWidgets.getPrefixed=function(t){return s["webkit"+t]||s["moz"+t]||s["ms"+t]},PushWidgets.requestFn=s.requestAnimationFrame||PushWidgets.getPrefixed("RequestAnimationFrame")||{},PushWidgets.cancelFn=s.cancelAnimationFrame||PushWidgets.getPrefixed("CancelAnimationFrame")||PushWidgets.getPrefixed("CancelRequestAnimationFrame")||{},PushWidgets.requestAnimFrame=function(t,e){if(PushWidgets.requestFn!=={})return PushWidgets.requestFn.call(s,t.bind(e));t.call(e)},PushWidgets.cancelAnimFrame=function(t){t&&PushWidgets.cancelFn.call(s,t)},PushWidgets.getScreenMetrics=function(){var t=(Math.sqrt(s.devicePixelRatio||1)+.1).limit(1,2),e={height:s.innerHeight||s.screen.height,width:s.innerWidth||s.screen.width};return{height:parseInt(e.height),width:parseInt(e.width),vmin:parseInt(Math.min(e.width,e.height)),vmax:parseInt(Math.max(e.width,e.height)),nativeVmin:parseInt(Math.min(e.width,e.height)*t),nativeVmax:parseInt(Math.max(e.width,e.height)*t),nativeHeight:parseInt(e.height*t),nativeWidth:parseInt(e.width*t),nativeVw:parseInt(s.innerWidth*t),nativeVh:parseInt(s.innerHeight*t),pixelRatio:t}},PushWidgets.hasTouch=n.html.classList.contains("touch-events"),PushWidgets.hasTouch&&["touchstart","touchmove","touchend"].each(function(t){Element.NativeEvents[t]=2}),PushWidgets.scrollbarWidth=0+function(){var t=new Element("div",{style:{visibility:"hidden",width:100,"-ms-overflow-style":"scrollbar","-webkit-overflow-style":"scrollbar","overflow-style":"scrollbar"}}).inject(n.body),e=t.offsetWidth;t.setStyle("overflow","scroll");var i=new Element("div",{style:{width:"100%"}}).inject(t).offsetWidth;return t.parentNode.removeChild(t),t.destroy(),e-i},PushWidgets.getViewportSize=function(t){return this.force&&(this.viewportSize=null),this.viewportSize&&!t||(t=new Element("div",{styles:{position:"fixed",top:0,left:0,bottom:0,right:0,background:"transparent"}}).inject(n.documentElement,"top"),this.viewportSize={width:t.offsetWidth,height:t.offsetHeight},t.dispose()),this.viewportSize},PushWidgets.goFullScreen=function(t){void 0===t&&(t=n),t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},PushWidgets.exitFullScreen=function(){n.exitFullscreen?n.exitFullscreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.webkitExitFullscreen?n.webkitExitFullscreen():n.msExitFullscreen&&n.msExitFullscreen()},PushWidgets.WFLocalCache={options:{defaultTtl:3600,gcInterval:3600,keyPrefix:"_"},set:function(t,e,i){if(null===e)return this.unset(t);try{i=i||this.options.defaultTtl;var n={expires:this._now()+i,json:JSON.stringify(e)};return s.localStorage.setItem(this.options.keyPrefix+JSON.stringify(t),JSON.stringify(n)),!0}catch(t){return PushWidgets.debug&&PushWidgets.debug(t),!1}},get:function(t){try{this._now()-s.localStorage.getItem("PushWidgets.WFLocalCache.lastgc")>this.options.gcInterval&&this._gc(),t=JSON.stringify(t);var e=s.localStorage.getItem(this.options.keyPrefix+t);return null===e?null:(e=JSON.parse(e),this._now()<e.expires?JSON.parse(e.json):(s.localStorage.removeItem(this.options.keyPrefix+t),null))}catch(t){return PushWidgets.debug&&PushWidgets.debug(t),null}},touch:function(t,e){e=e||this.options.defaultTtl;var i=this.get(t);return null!==i&&this.set(t,i,e)},fetch:function(t,e,i){try{var n=this.get(t);if(null!==n)return n;n=e();if(i=i||this.options.defaultTtl,null!==n&&this.set(t,n,i))return n}catch(t){return void(PushWidgets.debug&&PushWidgets.debug(t))}},unset:function(t){try{return t=JSON.stringify(t),localStorage.removeItem(this.options.keyPrefix+t),!0}catch(t){return PushWidgets.debug&&PushWidgets.debug(t),!1}},_gc:function(){try{var t=this._now();localStorage.setItem("PushWidgets.WFLocalCache.lastgc",t);for(var e=[],i=0;i<s.localStorage.length;i++){JSON.parse(localStorage.getItem(localStorage.key(i))).expires<t&&e.push(localStorage.key(i))}for(i=0;i<e.length;i++)localStorage.removeItem(e[i]);return!0}catch(t){return!1}},_now:function(){return parseInt((new Date).getTime()/1e3)}},PushWidgets.attachAll=function(){Object.keys(PushWidgets).forEach(function(t){"function"==typeof PushWidgets[t].attach&&PushWidgets[t].attach()})},s.addEvent("domready",function(){"undefined"!=typeof MutationObserver?(PushWidgets.mutationObserver=new MutationObserver(function(){PushWidgets.attachAll()}.bind(this)),PushWidgets.mutationObserver.observe(n.body,{attributes:!1,childList:!0,subtree:!1})):(PushWidgets.debug("MutationObserver not supported: update your browser."),s.addEventListener("load",PushWidgets.attachAll()))}),Fx.Diff=new Class({Extends:Fx,count:0,render:{},compute:function(t,e,i){return i<.98?(e-t)*i+t:e},set:function(t){var e=t-this.count;return e?(this.render(e,t),this.count+=e):this.render(this.to,this.to),this}}),Fx.Count=new Class({Extends:Fx.Diff,initialize:function(t,e){this.element=n.id(t),this.parent(e),this.options.format=e.format||{group:",",decimals:1,scientific:!1}},render:function(){return PushWidgets.requestAnimFrame(function(){this.element.set("text",this.count.format(this.options.format))},this),this}})}(window,document);