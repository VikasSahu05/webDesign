!function(t,r){"use strict";PushWidgets.WFIntersectionMonitor=new Class({Implements:[Events,Options],options:{onscroll:!0,scrollout:!1,tolerance:0,scrollParent:null,rootMargin:"0px",thresholdSteps:50,threshold:0},viewportSize:null,elements:null,observer:null,initialize:function(t,e){if(this.setOptions(e),this.options.onscroll)if(0<this.options.thresholdSteps){this.options.threshold=[];for(var n=0;n<=this.options.thresholdSteps;n++)this.options.threshold.push(n/this.options.thresholdSteps)}else this.threshold=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1];else this.options.threshold=this.options.tolerance;return MutationObserver&&(this.mutob=new MutationObserver(function(){this.updateObserver()}.bind(this).debounce(500,!1)),this.mutob.observe(this.options.scrollParent||r.body,{attributes:!1,childList:!0,subtree:!1})),this.updateObserver(t),this},monitor:function(t){t.forEach(function(t){var e=$(t.target);t.intersectionRatio>this.options.tolerance||t.isIntersecting?(e.setAttribute("scrolledin",""),this.fireEvent("scrolledin",[e,(this.options.scrollParent||r.body).getScroll().y,e.getCoordinates()])):(e.removeAttribute("scrolledin",""),this.fireEvent("scrolledout",[e,(this.options.scrollParent||r.body).getScroll().y,e.getCoordinates()])),this.options.onscroll&&this.fireEvent("scroll",[e,t.intersectionRatio]),1!=t.intersectionRatio&&!t.isIntersecting||this.options.scrollout||this.observer.unobserve(t.target)}.bind(this))},addElement:function(t){this.elements.push($(t)),this.observer.observe(t)},removeElement:function(t){this.elements.erase($(t)),this.observer.unobserve(t)},updateObserver:function(t){IntersectionObserver&&(this.observer=new IntersectionObserver(this.monitor.bind(this),{scrollin:this.options.scrollin,onscroll:this.options.onscroll,root:this.options.scrollParent,rootMargin:this.options.rootMargin,threshold:0}),this.elements=$$(t),this.elements.each(function(t){this.observer.observe(t)}.bind(this)))}}),Array.prototype.find||(PushWidgets.debug("Array.find not supported: update your browser."),Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],s=0;s<n;){var i=e[s];if(t.call(r,i,s,e))return i;s++}},configurable:!0,writable:!0})),t.addEvent("domready",function(){PushWidgets.lazyLoader=new PushWidgets.WFIntersectionMonitor($$("#site-wrap [data-bg-src]")).addEvent("scrolledin",function(t){var n,r,s,i,e,o=t.getAttribute("data-bg-src");""!==o.toString()&&(n=[160,320,480,640,736,768,800,896,960,1024,1280,1440,1536,1792,1920,2560],r=function(e){return n.find(function(t){return e<1.05*t||t==n[n.length-1]})},s=t.measure(function(){var t=this.getSize();return{width:t.x,height:t.y}}),i=PushWidgets.getScreenMetrics(),(e=new Image).onload=function(){t.setStyle("background-image","url("+this.src+")"),t.setAttribute("data-bg-src","")}.delay(50,e),e.src=o.replace(/\[\[(\d*)width\]\]/g,function(t,e){return parseInt(r(s.width*((parseInt(e)||100)/100)))}).replace(/\[\[(\d*)height\]\]/g,function(t,e){return parseInt(r(s.height*((parseInt(e)||100)/100)))}).replace(/\[\[(\d*)size\]\]/g,function(t,e){return parseInt(r((s.height+s.width)/2*(i.pixelRatio||1)*((parseInt(e)||100)/100)))}).replace(/\[\[(\d*)longside\]\]/g,function(t,e){return parseInt(r(Math.max(s.height,s.width)*(i.pixelRatio||1)*((parseInt(e)||100)/100)))}).replace(/\[\[(\d*)vmax\]\]/g,function(t,e){return parseInt(r(i.nativeVmax*((parseInt(e)||100)/100)))}).replace(/\[\[(\d*)vmin\]\]/g,function(t,e){return parseInt(r(i.nativeVmin*((parseInt(e)||100)/100)))}).replace(/\[\[(\d*)vw\]\]/g,function(t,e){return parseInt(r(i.nativeVw*((parseInt(e)||100)/100)))}).replace(/\[\[(\d*)vh\]\]/g,function(t,e){return parseInt(r(i.nativeVh*((parseInt(e)||100)/100)))}))}),"undefined"!=typeof MutationObserver&&new MutationObserver(function(){PushWidgets.lazyLoader.updateObserver($$('#site-wrap [data-bg-src]:not([data-bg-src=""]'))}.bind(this).debounce(100,!1)).observe(r.body,{attributes:!1,childList:!0,subtree:!1}),new PushWidgets.WFIntersectionMonitor($$(".mcbnb>li, .teamList>li, #snapshot .grid"),{onscroll:!1,scrollin:!0,scrollout:!1}).addEvent("scrolledin",function(t){t.addClass("lazyscroll")})})}(window,document),function(e){"use strict";PushWidgets.Counters=new Class({Implements:[Options,Events],options:{},initialize:function(t){new PushWidgets.WFIntersectionMonitor(t,{onscroll:!0,scrollin:!0,scrollout:!1}).addEvent("scrolledin",function(t){var e=new Fx.Count(t,{duration:3e3+1e3*Math.random(),transition:"linear",fps:30,format:{group:2100<t.get("data-counter")?",":"",decimals:t.get("data-decimals"),scientific:!1}});t.store("ctr",e),e.start(parseInt(t.get("text")),t.getAttribute("data-counter"))})}}),PushWidgets.Counters.attach=function(t){t=t||e.body,$(t).getElements('[data-ui-role="counter"]').each(function(t){t.set("text",0),new PushWidgets.Counters(t),t.set("data-ui-role",null)})}}((window,document));